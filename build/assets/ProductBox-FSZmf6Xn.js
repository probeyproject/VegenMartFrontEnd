import{r as i,a as Q,b as F,j as e,B as g,G as ue,L as ne}from"./index-WOnQHM8K.js";import{A as me}from"./aos-BJiJ9cf7.js";import{a as R}from"./1-BUmjTln7.js";import{M as ie,g as re,B as ae,L as oe}from"./HeaderMiddle-xqhyJlO4.js";const ge=({show:o,handleClose:C,productDetail:d,image:v,inStock:c,product_id:p,oldPrice:M,currentPrice:E,productName:G,productType:V,brand_name:h,sku:j,weight:_,weight_type:f,average_rating:W,defaultWeight:K,defaultWeightType:ee,discount_price:b})=>{var J;const[r,P]=i.useState(f||"Kg"),[x,L]=i.useState(""),[S,w]=i.useState(""),[B,n]=i.useState("");i.useState(!1);const[I,u]=i.useState(!1),[q,X]=i.useState(""),m=Q(l=>{var t;return(t=l==null?void 0:l.user)==null?void 0:t.authenticated}),$=Q(l=>l.user),D=(J=$==null?void 0:$.user)==null?void 0:J.id,A=()=>u(!I),z=l=>{const t=l.target.value;if(L(t),!t){w("");return}r==="Kg"?Number(t)<1||Number(t)>15?w("Enter 1 to 15 Kg"):w(""):r==="pieces"?Number(t)<5?w("Enter 5 pieces or above."):Number(t)>30?w("Maximum 30 pieces allowed."):w(""):w("")},y=Number(x);i.useEffect(()=>{P(f||"kg")},[f]),i.useEffect(()=>{y&&r&&(r==="Kg"&&y>=1||r==="pieces"&&y>=5||r==="g")&&N(y)},[x,r]);const N=async l=>{try{let t=r;r==="g"&&(t="Kg");const k=await R.post(`${F}/calculate-price/${p}`,{weight:l,unitType:t});n(k.data.final_price),X(k.data.weight)}catch(t){console.error("Error:",t)}};i.useEffect(()=>{x===""&&n("")},[x,n]);const U=(l,t)=>{l.preventDefault(),m?navigate(t):A()},Y=(l,t)=>{m?H():U(l,t)},H=async()=>{const l=parseFloat(x);if(r==="Kg"&&(isNaN(l)||l<.9)||r==="g"&&(isNaN(l)||l<.25)||r==="pieces"&&(isNaN(l)||l<5)){g.warning(`Please enter a valid input for ${r}.`);return}let t=r;r==="g"&&(t="Kg");try{const k=await R.post(`${F}/create/cart/${D}`,{productId:p,totalPrice:B,weight:q,weight_type:t});g.success("Your product add to cart successfully")}catch(k){console.error("Error creating cart:",k),g.error("Error creating cart. Please try again.")}};return e.jsx(ie,{isOpen:o,toggle:C,className:"modal-lg modal-fullscreen-sm-down",children:e.jsxs(re,{className:"position-relative  mt-3 p-2",children:[e.jsx("button",{type:"button",className:"btn-close position-absolute custom-close-btn",style:{top:"-17px",right:"-1px",width:"30px",height:"30px",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center",border:"none",cursor:"pointer"},"data-bs-dismiss":"modal",onClick:C,children:e.jsx("i",{className:"fa-solid fa-xmark",style:{fontSize:"18px"}})}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"slider-image",style:{width:"300px",height:"300px",overflow:"hidden"},children:e.jsx("img",{src:v[0],className:"img-fluid rounded object-fit-fill shadow p-4",alt:G,style:{width:"auto",height:"100%",objectFit:"cover"}})})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"right-sidebar-modal",children:[e.jsxs("h5",{className:"offer-top text-danger mb-2",children:[Math.round((b-E)/b*100)===-1/0?0:Math.round((b-E)/b*100),"% off"]}),e.jsx("h5",{className:"title-name",children:G}),e.jsxs("h5",{className:"theme-color price p-2",children:["₹",E,"/",f," ",e.jsxs("del",{className:"text-content",children:["₹",b]})," "]}),e.jsxs("div",{className:"product-rating mb-3",children:[e.jsx("ul",{className:"rating list-unstyled d-flex",children:[...Array(5)].map((l,t)=>e.jsx("li",{className:"me-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t<4?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`feather feather-star ${t<4?"fill":""}`,children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})},t))}),e.jsx("span",{className:"ms-2",children:"8 Reviews"})]}),e.jsx("hr",{style:{border:"0.1px dashed #b7b7b7"}}),e.jsxs("div",{className:"product-detail mb-3",children:[e.jsx("h5",{children:"Product Details :"}),e.jsx("p",{children:d})]}),e.jsx("div",{className:"container mt-4",children:e.jsxs("ul",{className:"d-flex flex-column list-unstyled mb-3 ",children:[e.jsxs("li",{className:"align-items-center d-flex mb-2",children:[e.jsx("h5",{className:"mb-1",children:"Brand Name:"}),e.jsx("h6",{className:"text-muted ms-3",children:h})]}),e.jsxs("li",{className:"align-items-center d-flex mb-2",children:[e.jsx("h5",{className:"mb-1",children:"SKU Code:"}),e.jsx("h6",{className:"text-muted ms-3",children:j})]}),e.jsxs("li",{className:"align-items-center d-flex mb-2",children:[e.jsx("h5",{className:"mb-1",children:"Product Type:"}),e.jsx("h6",{className:"text-muted ms-3",children:V})]})]})}),e.jsx("hr",{style:{border:"0.1px dashed #b7b7b7"}}),e.jsxs("div",{className:"select-size mb-2 d-flex align-items-center gap-2",children:[e.jsxs("select",{style:{width:"100px",height:"30px"},className:"border-1 rounded",onChange:l=>{P(l.target.value),L("")},value:r,children:[f==="pieces"&&e.jsx("option",{value:"pieces",children:"Pieces"}),(f==="Kg"||f==="g")&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Kg",children:"Kg"}),e.jsx("option",{value:"g",children:"Gram"})]})]}),e.jsxs("div",{className:"rounded-1",children:[r==="Kg"&&e.jsx("input",{style:{width:"100px",height:"30px"},type:"number",required:!0,placeholder:"Weight",className:"form-control  border-1",defaultValue:K||x,onChange:z}),r==="g"&&e.jsxs("select",{style:{width:"100px",height:"30px"},className:"rounded-2",value:x,onChange:z,children:[e.jsx("option",{children:"Select"}),e.jsx("option",{value:"0.25",children:"250 g"}),e.jsx("option",{value:"0.5",children:"500 g"}),e.jsx("option",{value:"0.75",children:"750 g"})]}),r==="pieces"&&e.jsx("input",{style:{width:"100px",height:"30px"},type:"number",required:!0,placeholder:"Pieces",className:"form-control  border-1",defaultValue:K||x,onChange:z}),e.jsx("div",{className:"text-danger small",children:S})]}),B?e.jsxs("div",{className:"text-success small",children:["MRP: ₹",B]}):""]}),e.jsxs("div",{className:"modal-button d-flex gap-2 mb-4",children:[e.jsx(ae,{className:"btn btn-animation",onClick:Y,disabled:c==0,children:c==0?"Out of stock":" Add To Cart"}),e.jsx(ae,{className:"btn btn btn-animation",onClick:()=>window.location.href=`/detail_page/${p}`,children:"View More Details"})]})]})}),e.jsx(oe,{isOpen:I,toggle:A})]})]})})};function pe({isOpen:o,toggle:C,offers:d}){return e.jsx("div",{children:e.jsxs(ie,{isOpen:o,toggle:C,style:{width:"350px",height:"300px"},className:"custom-modal",children:[e.jsx("button",{onClick:C,className:"close-button",children:"× "}),e.jsx(re,{className:"text-center",children:e.jsx("div",{children:(d==null?void 0:d.length)===0?e.jsx("p",{className:"small",children:"Discount not available at this time."}):d==null?void 0:d.map((v,c)=>e.jsx("div",{children:e.jsxs("p",{className:"small",children:["Purchase between"," ",e.jsx("span",{className:"fw-bold",children:v.min_weight})," to",e.jsx("span",{className:"fw-bold m-lg-1",children:v.max_weight}),"items and enjoy a"," ",e.jsxs("span",{className:"fw-bold me-1",children:["₹",v.discount_price||"N/A"]}),"extra discount on your order. Don’t miss out on this great deal!"]})},c))})})]})})}function je(o){return ue({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"},child:[]}]})(o)}const be=({product_id:o,productType:C,productDetails:d,imageSrc:v,productName:c,currentPrice:p,inStock:M,brand_name:E,sku:G,weight:V,weight_type:h,discount_price:j,offers:_,average_rating:f,defaultWeight:W,defaultWeightType:K,onImageClick:ee})=>{var le;i.useEffect(()=>{me.init({duration:100,easing:"ease-in-out",once:!0,mirror:!1})},[]);const[b,r]=i.useState(!1),[P,x]=i.useState(!1),[L,S]=i.useState(""),[w,B]=i.useState(""),[n,I]=i.useState(h||"Kg"),[u,q]=i.useState(""),[X,m]=i.useState(""),[$,D]=i.useState(!1);i.useState(!1);const[A,z]=i.useState(!1),y=Q(s=>{var a;return(a=s==null?void 0:s.user)==null?void 0:a.authenticated}),N=Q(s=>s.user),U=(le=N==null?void 0:N.user)==null?void 0:le.id,Y=N==null?void 0:N.wishlists,H=()=>z(!A);function J(){N.useDispatch(Y+1)}const l=()=>{D(!0)},t=()=>{D(!1)},k=()=>{r(!b)},se=(s,a)=>{s.preventDefault(),y?navigate(a):H()},te=(s,a)=>{y?xe():se(s,a)},ce=(s,a)=>{s.preventDefault(),y?(de(),J()):se(s,a)},de=async()=>{try{const s={productId:o,userId:U},a=await R.post(`${F}/addToWishlist`,s);x(!0),g.success("Add to wishlist Successful")}catch(s){console.error("Error:",s),g.warning("This product already in your wishlist!")}},Z=s=>{const a=s.target.value;if(q(a),!a){m("");return}n==="Kg"?Number(a)<1||Number(a)>15?m("Enter 1 to 15 Kg"):m(""):n==="pieces"?Number(a)<5?m("Enter 5 pieces or above."):Number(a)>30?m("Maximum 30 pieces allowed."):m(""):m("")},T=Number(u);i.useEffect(()=>{I(h||"kg")},[h]),i.useEffect(()=>{T&&n&&(n==="Kg"&&T<=15&&T>=1||n==="pieces"&&T>=5&&T<=30||n==="g")&&he(T)},[u,n]);const he=async s=>{try{let a=n;n==="g"&&(a="Kg");const O=await R.post(`${F}/calculate-price/${o}`,{weight:s,unitType:a});S(O.data.final_price),B(O.data.weight)}catch(a){console.error("Error:",a),g.warning("Please provide valide input & try again.")}};i.useEffect(()=>{u===""&&S("")},[u,S]);const xe=async()=>{const s=parseFloat(u);if(n==="Kg"&&(isNaN(s)||s<.9&&s>=15)||n==="g"&&(isNaN(s)||s<.25)||n==="pieces"&&(isNaN(s)||s<5)){n==="g"?g.warning("Please enter a valid input for Gram"):g.warning(`Please enter a valid input for ${n}`);return}let a=n;n==="g"&&(a="Kg");try{const O=await R.post(`${F}/create/cart/${U}`,{productId:o,totalPrice:L,weight:w,weight_type:a});g.success("Your product add to cart successfully")}catch(O){console.error("Error creating cart:",O),g.error("Error creating cart. Please try again.")}};return e.jsxs("div",{children:[e.jsx("div",{className:"col-12","data-aos":"fade-up",children:e.jsx("div",{className:`product-box shadow rounded-3  bg-white mb-2 ${M==0?"out-of-stock":""}`,children:e.jsxs("div",{children:[e.jsxs("div",{className:"product-image p-0 m-0  img-fluid",children:[e.jsx("div",{className:"position-absolute top-0 end-0 z-3",children:e.jsx(je,{id:"TooltipExample",onClick:l,className:"cursor-pointer ",title:"Offers"})}),e.jsx(ne,{to:`/detail_page/${o}`,children:e.jsx("a",{children:e.jsx("img",{src:v[0],onClick:ee,className:"object-fit-fill blur-up lazyloaded rounded-3",alt:c})})}),e.jsx(ne,{children:e.jsxs("ul",{className:"d-flex align-items-center list-unstyled product-option mb gap-2",children:[e.jsx("li",{children:e.jsx("a",{onClick:k,className:"text-dark",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-eye",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})}),e.jsx("li",{children:e.jsx("a",{onClick:l,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-info",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"16"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"8"})]})})}),e.jsx("li",{children:e.jsx("a",{className:`notifi-wishlist text-dark ml-2 ${P?"text-danger":""}`,onClick:ce,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:P||Y.some(s=>s.product_id===o)?"red":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-heart",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})})})]})})]}),e.jsxs("div",{className:"product-detail mt-1",children:[e.jsxs("a",{className:"d-flex justify-content-between",children:[e.jsx("h6",{className:"name m-0",style:{fontSize:"10px"},children:(c==null?void 0:c.length)>=15?`${c.substring(0,15)}...`:c}),e.jsxs("span",{className:"heavyweight",children:[Math.round(V)," ",h]})]}),e.jsxs("h5",{className:"sold text-content",children:[e.jsxs("span",{className:"theme-color price",children:["₹",p?Math.floor(p):""]}),e.jsx("del",{children:j?Math.floor(j):""})," ",e.jsxs("span",{className:"offer-top text-danger mb-2 m-lg-2",children:[Math.round((j-p)/j*100)===-1/0?0:Math.round((j-p)/j*100),"% off"]})]}),e.jsx("div",{className:"product-rating d-flex center justify-content-between align-content-center",children:e.jsx("div",{className:"",children:e.jsxs("ul",{className:"rating small",children:[e.jsx("li",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-star fill",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),e.jsx("li",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-star fill",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),e.jsx("li",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-star fill",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),e.jsx("li",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-star fill",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),e.jsx("li",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-star",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})})]})})}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("div",{children:e.jsxs("select",{id:"units",className:"border-1 rounded-2",onChange:s=>{I(s.target.value),q("")},value:n,children:[h==="pieces"&&e.jsx("option",{value:"pieces",children:"Pieces"}),(h==="Kg"||h==="g")&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Kg",children:"Kg"}),e.jsx("option",{value:"g",children:"Gram"})]})]})}),e.jsxs("div",{className:"rounded-1 w-50",style:{height:"20px"},children:[n==="Kg"&&e.jsx("input",{type:"number",required:!0,placeholder:"Weight",className:"form-control h-50 border-1",defaultValue:W||u,onChange:Z}),n==="g"&&e.jsxs("select",{className:"rounded-2",value:u,onChange:Z,children:[e.jsx("option",{children:"Select"}),e.jsx("option",{value:"0.25",children:"250 g"}),e.jsx("option",{value:"0.5",children:"500 g"}),e.jsx("option",{value:"0.75",children:"750 g"})]}),n==="pieces"&&e.jsx("input",{type:"number",required:!0,placeholder:"Pieces",className:"form-control h-50 border-1",defaultValue:W||u,onChange:Z})]})]}),e.jsx("div",{className:"text-danger small",children:X}),e.jsxs("div",{className:"d-flex justify-content-between align-content-center center p-1 mt-1",children:[L?e.jsxs("div",{className:"text-success small",children:["₹",L]}):"",e.jsx("div",{className:"add-to-cart-box w-50",children:L?e.jsx("button",{className:"btn btn-animation btn-md",onClick:te,style:{width:"80px",height:"25px",fontSize:"12px"},disabled:M==0,children:M==0?"Out of stock":"Add To Cart"}):e.jsx("button",{className:"btn btn-animation btn-md",onClick:te,style:{width:"135px",height:"25px",fontSize:"12px"},disabled:M==0,children:M==0?"Out of stock":"Add To Cart"})})]})]})]})})}),e.jsx(oe,{isOpen:A,toggle:H}),e.jsx(pe,{isOpen:$,toggle:()=>D(!1),onClose:t,offers:_}),e.jsx(ge,{image:v,inStock:M,currentPrice:p,productName:c,product_id:o,productDetail:d,productType:C,brand_name:E,average_rating:f,discount_price:j,sku:G,show:b,defaultWeightType:K,defaultWeight:W,weight:V,weight_type:h,handleClose:k})]})};export{je as B,pe as D,be as P};
