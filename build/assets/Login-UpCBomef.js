import{r as o,a as v,e as y,u as O,j as e,B as r,b as d,v as P}from"./index-WOnQHM8K.js";import{H as w,a as T}from"./HeaderMiddle-xqhyJlO4.js";import{H as S}from"./HeaderBottom-Dy3OY4qr.js";import{F as k}from"./Footer-C9I6UQzh.js";import{l as E}from"./1-BUmjTln7.js";import"./aos-BJiJ9cf7.js";function F(){const[a,m]=o.useState("");v(s=>s.user);const[t,h]=o.useState(""),[l,n]=o.useState(!1),[i,x]=o.useState(!1),p=y(),u=O(),g=s=>/^[6-9]\d{9}$/.test(s),f=s=>{m(s.target.value)},j=s=>{h(s.target.value)},b=async()=>{if(!a){r.warning("Please enter a mobile number!");return}if(!g(a)){r.error("Please enter a valid 10-digit mobile number!");return}n(!0);try{if(!(await fetch(`${d}/send-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:a})})).ok)throw new Error("Network response was not ok");r.success("OTP sent successfully!"),x(!0)}catch(s){console.error("Error sending OTP:",s),r.error("Failed to send OTP. Please try again.")}finally{n(!1)}},N=async()=>{if(!t){r.warning("Please enter the OTP!");return}if(t.length!==6){r.error("Invalid OTP. Please enter a 6-digit OTP.");return}n(!0);try{const s=await fetch(`${d}/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:a,otp:t})});if(!s.ok)throw new Error("Network response was not ok");const c=await s.json();p(P(c)),r.success("OTP verified successfully!"),u("/")}catch(s){console.error("Error verifying OTP:",s),r.error("Invalid OTP. Please try again.")}finally{n(!1)}};return e.jsxs("div",{className:"container-fluid px-0 overflow-hidden",children:[e.jsxs("header",{className:"pb-md-4 pb-0",children:[e.jsx(w,{}),e.jsx(T,{}),e.jsx(S,{})]}),e.jsx("section",{className:"breadcrumb-section pt-0",children:e.jsx("div",{className:"container-fluid-lg",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"breadcrumb-contain",children:[e.jsx("h2",{className:"mb-2",children:"Log In"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"index.html",children:e.jsx("i",{className:"fa-solid fa-house"})})}),e.jsx("li",{className:"breadcrumb-item active",children:"Log In"})]})})]})})})})}),e.jsx("section",{className:"log-in-section background-image-2 section-b-space",children:e.jsx("div",{className:"container-fluid-lg w-100",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xxl-6 col-xl-5 col-lg-6 d-lg-block d-none ms-auto",children:e.jsx("div",{className:"image-contain",children:e.jsx("img",{src:"https://themes.pixelstrap.com/fastkart/assets/images/inner-page/log-in.png",className:"img-fluid",alt:""})})}),e.jsx("div",{className:"col-xxl-4 col-xl-5 col-lg-6 col-sm-8 mx-auto",children:e.jsxs("div",{className:"log-in-box",children:[e.jsx("div",{className:"log-in-title",children:e.jsx("h3",{className:"text-center",children:"Welcome To Vegenmart"})}),e.jsx("div",{className:"d-flex justify-content-center align-items-center vh-50",children:e.jsxs("div",{className:"card p-4 text-center",style:{width:"300px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:E,alt:"Company Logo",style:{width:"50px"}})}),e.jsx("p",{children:i?"Enter OTP":"Log in or Sign up"}),e.jsxs("form",{onSubmit:s=>s.preventDefault(),children:[i?e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter OTP",value:t,onChange:j,maxLength:"6"})}):e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter mobile number",value:a,onChange:f,maxLength:"10"})}),e.jsx("button",{className:"btn btn-primary w-100",onClick:i?N:b,disabled:l,children:l?e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):i?"Verify OTP":"Generate OTP"})]}),e.jsxs("p",{className:"mt-3 text-muted",style:{fontSize:"12px"},children:["By continuing, you agree to our"," ",e.jsx("a",{href:"/terms",children:"Terms of service"})," &"," ",e.jsx("a",{href:"/privacy",children:"Privacy policy"}),"."]})]})})]})})]})})}),e.jsx(k,{})]})}export{F as default};
